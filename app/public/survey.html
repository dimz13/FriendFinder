<!DOCTYPE html>
<html>
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <meta http-equiv="X-UA-Compatible" content="ie=edge">
        <title>Survey Questions</title>
        <link rel="stylesheet" href="custom.css">
        <script src="https://code.jquery.com/jquery.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js"
            integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1"
            crossorigin="anonymous"></script>
        <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js"
            integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM"
            crossorigin="anonymous"></script>
        <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css"
            integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
    </head>
<body>
	<div class="container content" id="main-container">
		<div class="jumbotron" id="survey-jumbotron">
            <h1 class="text-center" style="padding-top:200px;">
                Survey Questions</h1>
           
        </div>
		<form>
			<div class="form-group">
                <label for="formGroupExampleInput">Name (Required)</label>
                <input type="text" class="form-control" id="name">
            </div>
            <div class="form-group">
                <label for="formGroupExampleInput2">Link to Digital Profile(Required)</label>
                <input type="text" class="form-control" id="photo">
            </div>
        
        <hr><br>
        <div class="form-group">
            <h3><strong>Question 1</strong></h3>
            <h4>Your mind is always buzzing with ideas</h4>
            <select class="form-control" id="q1" style="width:200px">
                <option value="empty">Select an Option</option>
                <option value="1">1 (Strongly Disagree)</option>
                <option value="2">2</option>
                <option value="3">3</option>
                <option value="4">4</option>
                <option value="5">5 (Strongly Agree)</option>
            </select>
        </div>
        <div class="form-group">
            <h3><strong>Question 2</strong></h3>
            <h4>You love to party</h4>
            <select class="form-control" id="q2" style="width:200px">
                <option value="empty">Select an Option</option>
                <option value="1">1 (Strongly Disagree)</option>
                <option value="2">2</option>
                <option value="3">3</option>
                <option value="4">4</option>
                <option value="5">5 (Strongly Agree)</option>
            </select> 
        </div>
        <div class="form-group">
            <h3><strong>Question 3</strong></h3>
            <h4>Your friends tell you that you are very reliable</h4>
            <select class="form-control" id="q3" style="width:200px">
                <option value="empty">Select an Option</option>
                <option value="1">1 (Strongly Disagree)</option>
                <option value="2">2</option>
                <option value="3">3</option>
                <option value="4">4</option>
                <option value="5">5 (Strongly Agree)</option>
            </select>
        </div>
        <div class="form-group">
            <h3><strong>Question 4</strong></h3>
            <h4>You love being outdoors hiking,camping</h4>
            <select class="form-control" id="q4" style="width:200px">
                <option value="empty">Select an Option</option>
                <option value="1">1 (Strongly Disagree)</option>
                <option value="2">2</option>
                <option value="3">3</option>
                <option value="4">4</option>
                <option value="5">5 (Strongly Agree)</option>
            </select>  
        </div>
        <div class="form-group">
            <h3><strong>Question 5</strong></h3>
            <h4>You are able to handle frequent changes without too much trouble</h4>
            <select class="form-control" id="q5" style="width:200px">
                <option value="empty">Select an Option</option>
                <option value="1">1 (Strongly Disagree)</option>
                <option value="2">2</option>
                <option value="3">3</option>
                <option value="4">4</option>
                <option value="5">5 (Strongly Agree)</option>
            </select>    
        </div>
        <div class="form-group">
            <h3><strong>Question 6</strong></h3>
            <h4>You appreciate a good meal</h4>
            <select class="form-control" id="q6" style="width:200px">
                <option value="empty">Select an Option</option>
                <option value="1">1 (Strongly Disagree)</option>
                <option value="2">2</option>
                <option value="3">3</option>
                <option value="4">4</option>
                <option value="5">5 (Strongly Agree)</option>
            </select> 
        </div>
        <div class="form-group">
            <h3><strong>Question 7</strong></h3>
            <h4>You value loyalty above all else</h4>
            <select class="form-control" id="q7" style="width:200px">
                <option value="empty">Select an Option</option>
                <option value="1">1 (Strongly Disagree)</option>
                <option value="2">2</option>
                <option value="3">3</option>
                <option value="4">4</option>
                <option value="5">5 (Strongly Agree)</option>
            </select> 
        </div>
        <div class="form-group">
            <h3><strong>Question 8</strong></h3>
            <h4>You listen to all opinions but act on your instincts</h4>
            <select class="form-control" id="q8" style="width:200px">
                <option value="empty">Select an Option</option>
                <option value="1">1 (Strongly Disagree)</option>
                <option value="2">2</option>
                <option value="3">3</option>
                <option value="4">4</option>
                <option value="5">5 (Strongly Agree)</option>
            </select>   
        </div>
        <div class="form-group">
            <h3><strong>Question 9</strong></h3>
            <h4>You like action movies more than rom-coms</h4>
            <select class="form-control" id="q9" style="width:200px">
                <option value="empty">Select an Option</option>
                <option value="1">1 (Strongly Disagree)</option>
                <option value="2">2</option>
                <option value="3">3</option>
                <option value="4">4</option>
                <option value="5">5 (Strongly Agree)</option>
            </select>      
        </div>
        <div class="form-group">
            <h3><strong>Question 10</strong></h3>
            <h4>You like winter more than the summer</h4>
            <select class="form-control" id="q10" style="width:200px">
                <option value="empty">Select an Option</option>
                <option value="1">1 (Strongly Disagree)</option>
                <option value="2">2</option>
                <option value="3">3</option>
                <option value="4">4</option>
                <option value="5">5 (Strongly Agree)</option>
            </select>   
        </div>
		</form>
		<div class="text-center">
			<button id="submitBtn" type="submit" class="btn btn-success btn-lg">Submit</button>
		</div>
		
		<!-- Best Match display  -->
		<div id="bestMatchModal" class="modal fade" role="dialog">
			<div class="modal-dialog">
				<div class="modal-content">
					<div class="modal-header">
						<button type="button" class="close" data-dismiss="modal">&times;</button>
                        <h3 class="modal-title">You are most compatible with:</h3>
                        
					</div>
					<div class="modal-body">
					<p>	<h4 id="bestMatch"></h4>
						<img id="bestMatchPhoto" style="float:right" src="#"></p>
					</div>
					<div class="modal-footer">
						<button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
					</div>
				</div>
			</div>
		</div>
	</div>

	<footer class="footer">
        <div class="container">
            <p><a href="/api/friends">API Friends List</a> | <a href="https://github.com/dimz13/FriendFinder">GitHub
                    Repo</a>
        </div>
    </footer>
    
    <script type="text/javascript">
        $("#submitBtn").on("click", function(event) {
            event.preventDefault();
            // Form validation
           
            if($("#nameInput").val() === "" || $("#picInput").val() === "" || $("#q1").val() === "empty" || $("#q2").val() === "empty" || $("#q3").val() === "empty" || $("#q4").val() === "empty" || $("#q5").val() === "empty" || $("#q6").val() === "empty" || $("#q7").val() === "empty" || $("#q8").val() === "empty" || $("#q9").val() === "empty" || $("#q10").val() === "empty") {
                alert("Required fields are not selected")
            } else 
             {
                var newUser = {
                    name: $("#name").val().trim(),
                    pic: $("#photo").val().trim(),
                    scores: [
                        $("#q1").val(),
                        $("#q2").val(),
                        $("#q3").val(),
                        $("#q4").val(),
                        $("#q5").val(),
                        $("#q6").val(),
                        $("#q7").val(),
                        $("#q8").val(),
                        $("#q9").val(),
                        $("#q10").val()
                    ]
                };
                var currentURL = window.location.origin;
                // POST Call after getting the data from survely form

                $.post("/api/friends", newUser)
        .then(function(data) {
          console.log("From html: ",data);
          $("#bestMatch").text(data.name);
          $("#bestMatchPhoto").attr("src", data.photo);
          $("#bestMatchModal").modal("toggle");
        });
        
            } 
            
        });
    </script>


</body>
</html>

